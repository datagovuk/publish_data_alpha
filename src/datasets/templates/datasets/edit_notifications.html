{% extends 'main.html' %}
{% load static %}
{% load flow_state %}
{% load i18n %}

{% block page_title %}
  {% trans "Get notifications" %}
{% endblock %}

{% block inner_content %}

  {% include 'datasets/includes/error_box.html' %}

  <h1 class="heading-large">
    {% trans "Get notifications" %}
  </h1>

  <form action="{% url 'edit_dataset_notifications' dataset.name %}" method="POST">
    {% csrf_token %}

    <div
        id="notifications_form_group"
        class="form-group {% if form.notifications.errors %}error{% endif %}">
      <fieldset>
        <legend class="visuallyhidden">
          {% trans "Get notifications?" %}
        </legend>

        <p>
          {% blocktrans %}
            Would you like us to send you an email when your dataset needs to
            be updated?
          {% endblocktrans %}
        </p>

        {% for error in form.notifications.errors %}
          <span class="error-message">{{ error }}</span>
        {% endfor %}

        <label
            class="block-label selection-button-radio"
            for="id_notifications_0">
          <input
              id="id_notifications_0"
              name="{{ form.notifications.html_name }}"
              type="radio"
              value="yes"
              {% if form.notifications.value == 'yes' %}
                checked
              {% endif %} />
          <span>{% trans "Yes" %}</span>
        </label>

        <label
            class="block-label selection-button-radio"
            for="id_notifications_1">
          <input
              id="id_notifications_1"
              name="{{ form.notifications.html_name }}"
              type="radio"
              value="no"
              {% if form.notifications.value == 'no' %}
                checked
              {% endif %} />
          <span>{% trans "No" %}</span>
        </label>
      </fieldset>
    </div>

    <div class="form-group">
      {% if request|is_checking or request|is_editing %}
        <p>
          <input type="submit" class="button" value="{% trans "Change" %}"/>
        </p>
      {% else %}
        <p>
          <input type="submit" class="button" value="{% trans "Save and continue" %}"/>
        </p>
      {% endif %}
      {% if request|is_checking %}
        <p>
          <a
              href="{% url 'publish_dataset' dataset.name %}"
              class="secondary-button">{% trans "Cancel" %}</a>
        </p>
      {% elif request|is_editing %}
        <p>
          <a
              href="{% url 'edit_full_dataset' dataset.name %}"
              class="secondary-button">{% trans "Cancel" %}</a>
        </p>
      {% endif %}
    </div>

  </form>
{% endblock %}
