{% extends 'main_with_navbar.html' %}
{% load static %}
{% load flow_state %}

{% block page_title %}
  Add dataset licence
{% endblock %}

{% block inner_content %}

  {% include 'datasets/includes/error_box.html' %}

  <h1 class="heading-large">
    Choose a licence
  </h1>

  <p>Choose the licence that your dataset is published under.</p>

  <p>
    Most datasets are published under the Open Government Licence (OGL),
    which means the data within them can be copied and used by anyone.
  </p>

  <form
      action="{% url 'edit_dataset_licence' dataset.name %}"
      method="POST">

    {% csrf_token %}

    <div
        class="form-group {% if form.licence.errors %}error{% endif %}"
        id="licence_form_group">
      <fieldset>
        <legend class="visually-hidden">Choose a licence</legend>
        {% for error in form.licence.errors %}
          <span class="error-message">{{ error }}</span>
        {% endfor %}

        <label class="block-label selection-button-radio" for="id_licence_0">
          <input
              id="id_licence_0"
              name="{{ form.licence.html_name }}"
              type="radio"
              value="uk-ogl"
              {% if form.licence.value == 'uk-ogl' %}
                checked
              {% endif %} />
          <span>Open Government Licence</span>
        </label>
        <label
            class="block-label selection-button-radio"
            for="id_licence_2"
            data-target="other-licence">
          <input
              id="id_licence_2"
              name="{{ form.licence.html_name }}"
              type="radio"
              value="other"
              {% if form.licence.value == 'other' %}
                checked
              {% endif %}  />
          <span>Other:</span>
        </label>
        <div class="panel panel-border-narrow js-hidden" id="other-licence">
          <label
              class="form-label"
              for="id_licence_other">Name of your licence:</label>
          <input
              class="form-control"
              id="id_licence_other"
              name="{{ form.licence_other.html_name }}"
              value="{{ form.licence_other.value }}"
              type="text">
        </div>

      </fieldset>
    </div>

    <div class="form-group">
      <input type="submit" class="button" value="Save and continue">
      <a
          href="{% url 'edit_dataset_location' dataset.name %}"
          class="button-secondary">Skip</a>
    </div>
  </form>

{% endblock %}
