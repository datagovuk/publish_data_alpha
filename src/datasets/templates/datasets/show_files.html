{% extends 'main_with_navbar.html' %}
{% load static %}

{% block page_title %}
  Dataset links
{% endblock %}

{% block inner_content %}
  <main id="content" role="main" tabindex="-1">
    <h1 class="heading-large">
      Dataset links
    </h1>

    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Url</th>
          <th>Valid</th>
          <th><span class="visuallyhidden">Actions</span></th>
        </tr>
      </thead>
      <tbody>
        {% for file in dataset.files.all %}
          {% if file.is_documentation %}
            <tr>
              <td>{{ file.title }} </td>
              <td>{{ file.url }} </td>
              <td>✔</td>
              <td>
                <a href="{% url adddoc_viewname dataset.name file.id %}">Edit</a>
                <a href="{% url 'edit_dataset_deletedoc' dataset.name file.id %}">Delete</a>
              </td>
            </tr>
          {% else %}
            <tr>
              <td>{{ file.title }} </td>
              <td>{{ file.url }} </td>
              <td>✔</td>
              <td>
                <a href="{% url addfile_viewname dataset.name file.id %}">Edit</a>
                <a href="{% url 'edit_dataset_deletefile' dataset.name file.id %}">Delete</a>
              </td>
            </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>

    <form
        method="GET"
        {% if editing %}
          action="{% url 'edit_dataset_check_dataset' dataset.name %}"
        {% else %}
          action="{% url 'edit_dataset_adddoc' dataset.name %}"
        {% endif %}
        class="form">
      <div class="form-group">

        {% csrf_token %}
        <input type="hidden" name="editing" value="{{ editing }}">

        <input type="submit" class="button" value="Save and continue">
      </div>
    </form>

    <div class="form-group">
      <a href="{% url addfile_viewname dataset.name %}">
        Add another link
      </a>
    </div>

  </main>
{% endblock %}
