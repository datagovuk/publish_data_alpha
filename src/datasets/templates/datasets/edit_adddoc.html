{% extends 'main_with_navbar.html' %}
{% load static %}
{% load flow_state %}
{% load i18n %}

{% block page_title %}
  {% trans "Add documentation" %}
{% endblock %}

{% block inner_content %}

  {% include 'datasets/includes/error_box.html' %}

  <h1 class="heading-large">
    {% if is_first_file %}
      {% trans "Add supporting documentation" %}
    {% else %}
      {% trans "Add more supporting documentation" %}
    {% endif %}
  </h1>

  <form
      action="{% url 'edit_dataset_adddoc' dataset.name datafile_id %}"
      method="POST">
    {% csrf_token %}

    <div
        id="url_form_group"
        class="form-group {% if form.url.errors %}error{% endif %}">
      <label class="form-label-bold" for="id_url">URL</label>
      {% for error in form.url.errors %}
        <span class="error-message">{{ error }}</span>
      {% endfor %}
      <span class="form-hint">
        {% trans "Enter a link (beginning with http:// or https://) to the document" %}
      </span>
      <input
          class="form-control form-control-2-3"
          id="id_url"
          name="{{ form.url.html_name }}"
          type="text"
          value="{{ form.url.value|default:'' }}"/>
    </div>

    <div
        id="title_form_group"
        class="form-group {% if form.title.errors %}error{% endif %}">
      <label class="form-label-bold" for="id_title">
        {% trans "Title" %}
      </label>
      {% for error in form.title.errors %}
        <span class="error-message">{{ error }}</span>
      {% endfor %}
      <span class="form-hint">
        {% blocktrans %}
          Give your document a descriptive title to help users understand what
          it contains. The title shouldnâ€™t be the same as the URL.
        {% endblocktrans %}
      </span>
      <input
          class="form-control form-control-2-3"
          id="id_title"
          name="{{ form.title.html_name }}"
          type="text"
          value="{{ form.title.value|default:'' }}"/>
    </div>

    <div class="form-group">
      {% if request|is_checking %}
        <input type="submit" class="button" value="{% trans "Save" %}">
        <a
            href="{% url 'publish_dataset' dataset.name %}"
            class="secondary-button">
          {% trans "Cancel" %}
        </a>
      {% elif request|is_editing %}
        <input type="submit" class="button" value="{% trans "Save" %}">
        <a
            href="{% url 'edit_full_dataset' dataset.name %}"
            class="secondary-button">
          {% trans "Cancel" %}
        </a>
      {% else %}
        <input type="submit" class="button" value="{% trans "Save and continue" %}">
      {% endif %}
    </div>

  </form>
{% endblock %}
