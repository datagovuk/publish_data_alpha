{% extends 'main_with_navbar.html' %}
{% load static %}
{% load flow_state %}

{% block page_title %}
  Time period
{% endblock %}

{% block inner_content %}

  {% include 'datasets/includes/error_box.html' %}

  <h1 class="heading-large">
    {% if is_first_file %}
      Do you have a link to the data?
    {% else %}
      Add a link
    {% endif %}
  </h1>

  <form
      method="post"
      action="{% url 'edit_dataset_addfile_monthly' dataset.name datafile_id %}"
      class="form">
    {% csrf_token %}

    <div class="form-group {% if form.yesno.errors %}error{% endif %}">

      {% if form.yesno.errors %}
        <p id="yesno_form_group" class="error">Please select yes or no</p>
      {% endif %}

      <label  style="display: {% if is_first_file %}block{% else %}none{% endif %}"
              class="block-label selection-button-radio"
              data-target="add-link">
        <input
            type="radio"
            name="yesno"
            value="true"
            {% if form.urls.errors or form.title.errors or not is_first_file %}checked="checked"{% endif %}/>
        <span>Yes</span>
      </label>

      <div class="{% if is_first_file %}panel panel-border-narrow js-hidden{% endif %}" id="add-link">
        {% include 'datasets/includes/title_url.html' %}

        <div class="form-group">
          <fieldset>
            <legend>
              <span class="form-label-bold">
                Time period of this link
              </span>
              <span class="form-hint">For example, 3 2016</span>
            </legend>
            <div class="form-date">
              <div
                  id="month_form_group"
                  class="form-group form-group-month {% if form.month.errors %}error{% endif %}">
                <label class="form-label" for="period_month">Month</label>
                {% for error in form.month.errors %}
                  <span class="error-message">{{ error }}</span>
                {% endfor %}
                <input
                    class="form-control"
                    id="period_month"
                    name="{{ form.month.html_name }}"
                    type="number"
                    pattern="[0-9]*"
                    min="0"
                    max="12"
                    value="{{ form.month.value|default:'' }}"/>
              </div>

              <div
                  id="year_form_group"
                  class="form-group form-group-year {% if form.year.errors %}error{% endif %}">
                <label class="form-label" for="period_year">Year</label>
                {% for error in form.year.errors %}
                  <span class="error-message">{{ error }}</span>
                {% endfor %}
                <input
                    class="form-control"
                    id="period_year"
                    name="{{ form.year.html_name }}"
                    type="number"
                    pattern="[0-9]*"
                    min="0"
                    value="{{ form.year.value|default:'' }}"/>
              </div>
            </div>
          </fieldset>
        </div>
      </div>

      <label class="block-label selection-button-radio"  style="display: {% if is_first_file %}block{% else %}none{% endif %}">
        <input
            type="radio"
            name="yesno"
            value="false"/>
        <span>No</span>
      </label>
    </div>

    {% include 'datasets/includes/frequency_add_submit.html' %}

  </form>

{% endblock %}
