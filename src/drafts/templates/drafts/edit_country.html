{% extends 'main_with_navbar.html' %}
{% load static %}

{% block page_title %}
  Add dataset area
{% endblock %}

{% block inner_content %}
{% with countries=wizard.form.countries %}

  {% if wizard.form.errors %}
    <div
        class="error-summary"
        role="group"
        aria-labelledby="error-summary-heading-example-1"
        tabindex="-1">
      <h1
          class="heading-medium error-summary-heading"
          id="error-summary-heading-example-1">
        There was a problem
      </h1>

      <ul class="error-summary-list">
        {% for error in wizard.form.non_field_errors %}
        <li>
          {{ error }}
          <span class="visuallyhidden">.</span>
        </li>
        {% endfor %}

        {% for error in countries.errors %}
        <li>
          <a href="#countries_form_group">
            Please select the area that your dataset covers
          </a>
          <span class="visuallyhidden">.</span>
        </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <h1 class="heading-large">
    Choose an area
  </h1>

  <p>
    Which area does your dataset cover? You must choose at least one
    of the following.
  </p>

  <form
      action="{% url 'edit_dataset_step' dataset.name 'country' %}"
      method="POST">

    {{ wizard.management_form }}
    {% csrf_token %}
    <input type="hidden" name="editing" value="{{ editing }}">

    <div
        class="form-group {% if countries.errors %}error{% endif %}"
        id="countries_form_group">
      <fieldset>
        <legend class="visually-hidden">Choose an area</legend>
        {% if countries.errors %}
          <span class="error-message">
            Please select the area that your dataset covers
          </span>
        {% endif %}

        <label class="block-label form-checkbox" for="id_countries_0">
          <input
              id="id_countries_0"
              name="{{ countries.html_name }}"
              type="checkbox"
              value="england"
              {% if 'england' in countries.value %}
                checked
              {% endif %} />
          <span>England</span>
        </label>
        <label class="block-label form-checkbox" for="id_countries_1">
          <input
              id="id_countries_1"
              name="{{ countries.html_name }}"
              type="checkbox"
              value="wales"
              {% if 'wales' in countries.value %}
                checked
              {% endif %} />
          <span>Wales</span>
        </label>
        <label class="block-label form-checkbox" for="id_countries_2">
          <input
              id="id_countries_2"
              name="{{ countries.html_name }}"
              type="checkbox"
              value="scotland"
              {% if 'scotland' in countries.value %}
                checked
              {% endif %} />
          <span>Scotland</span>
        </label>
        <label class="block-label form-checkbox" for="id_countries_3">
          <input
              id="id_countries_3"
              name="{{ countries.html_name }}"
              type="checkbox"
              value="northern-ireland"
              {% if 'northern-ireland' in countries.value %}
                checked
              {% endif %}  />
          <span>Northern Ireland</span>
        </label>
        <label class="block-label form-checkbox" for="id_countries_4">
          <input
              id="id_countries_4"
              name="{{ countries.html_name }}"
              type="checkbox"
              value="overseas"
              {% if 'overseas' in countries.value %}
                checked
              {% endif %}  />
          <span>Overseas</span>
        </label>
      </fieldset>
    </div>

    <div class="form-group">
      <input type="submit" class="button" value="Continue">
    </div>

  </form>

{% endwith %}
{% endblock %}
